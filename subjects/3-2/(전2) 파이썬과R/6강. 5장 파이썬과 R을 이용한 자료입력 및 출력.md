# 6강. 5장 파이썬과 R을 이용한 자료입력 및 출력

## 학습 목표
1. R(`readline`)과 파이썬(`input`)을 이용해 사용자 입력을 받고 처리할 수 있다.
2. R(`read.table`)과 파이썬/Pandas(`read_csv`)를 사용하여 텍스트 파일을 읽고 데이터프레임으로 변환할 수 있다.
3. R(`write.table`)과 파이썬/Pandas(`to_csv`)를 사용하여 데이터프레임을 텍스트 파일로 저장할 수 있다.
4. R(`readxl`)과 파이썬/Pandas(`read_excel`)를 사용하여 엑셀 파일을 다룰 수 있다.
5. R과 파이썬의 기본 문자열 처리 함수(분리, 결합, 찾기)를 비교하고 활용할 수 있다.

---

## 📝 요약 (Summary)
1.  **사용자 입력**: R은 `readline()` 함수, 파이썬은 `input()` 함수를 사용하여 사용자로부터 대화형으로 입력을 받을 수 있습니다. 두 함수 모두 입력받은 값은 기본적으로 문자열(character/string) 타입으로 처리됩니다.
2.  **텍스트 파일 읽기**: R은 내장 함수인 `read.table()`을, 파이썬은 Pandas 라이브러리의 `read_csv()` 함수를 주로 사용하여 텍스트 파일(CSV, TXT 등)을 데이터프레임으로 불러옵니다.
3.  **텍스트 파일 쓰기**: R은 `write.table()` 함수, 파이썬은 Pandas 데이터프레임의 `to_csv()` 메서드를 사용하여 메모리에 있는 데이터를 텍스트 파일로 저장합니다.
4.  **엑셀 파일 처리**: 엑셀 파일을 다루기 위해서는 추가적인 패키지/라이브러리가 필요합니다. R에서는 `readxl` 패키지(읽기)나 `openxlsx` 패키지(읽기/쓰기)가, 파이썬에서는 Pandas의 `read_excel()` 함수와 `to_excel()` 메서드가 널리 사용됩니다.
5.  **기본 문자열 처리**: R은 `nchar()`(길이), `strsplit()`(분리), `paste()`(결합) 등의 함수를 사용합니다. 파이썬은 문자열 자체가 리스트처럼 동작하여 `len()`(길이), 인덱싱/슬라이싱, `+`(결합), `.split()`(분리) 등 다양한 메서드를 제공합니다.
6.  **고급 문자열 처리**: R은 `substr()`(부분 추출), `grep()`/`grepl()`(패턴 검색) 등 정규표현식을 활용한 강력한 문자열 처리 함수를 내장하고 있습니다. 파이썬 역시 `.find()`, `.replace()` 등 다양한 문자열 메서드와 `re` 모듈을 통해 복잡한 문자열 조작을 지원합니다.
---

## ✏️ 심화 학습 (Study Subject)

### 1. 파일 경로의 함정과 해결책: 절대 경로 vs. 상대 경로

데이터를 읽고 쓸 때 가장 흔하게 마주치는 오류는 "파일을 찾을 수 없다(File not found)"입니다. 이 문제의 대부분은 파일 경로에 대한 이해 부족에서 비롯됩니다.

#### 가. 관점별 비교: 절대 경로 vs. 상대 경로

| 구분 | 절대 경로 (Absolute Path) | 상대 경로 (Relative Path) |
| :--- | :--- | :--- |
| **정의** | 최상위 디렉터리(Root)부터 시작하는 전체 경로 | **현재 작업 디렉터리(Working Directory)**를 기준으로 한 경로 |
| **예시 (Windows)** | `C:\Users\MyName\Documents\data.csv` | `data.csv`, `data/data.csv`, `../data/data.csv` |
| **장점** | 위치가 명확하고, 어디서 실행하든 동일한 파일을 가리킴 | 코드가 짧고 간결하며, 프로젝트 폴더를 통째로 옮겨도 코드를 수정할 필요 없음 |
| **단점** | **다른 컴퓨터에서는 동작하지 않음** (사용자 이름, 폴더 구조가 다름) | 현재 작업 디렉터리가 어디인지 정확히 알아야 함 |

#### 나. 가상 시나리오: "팀 프로젝트에서 코드가 저한테서만 돌아가요!"

-   **상황**: A학생은 자신의 컴퓨터 바탕화면에 있는 파일을 절대 경로(`C:\Users\A\Desktop\mydata.csv`)로 불러오는 코드를 작성하여 팀원 B에게 공유했습니다. B학생의 컴퓨터에는 해당 경로가 존재하지 않아 코드가 실행되지 않습니다.
-   **원인**: 개인 컴퓨터 환경에 종속적인 **절대 경로를 하드코딩**했기 때문입니다.
-   **해결책**:
    1.  **작업 디렉터리 확인**: 먼저 현재 작업 디렉터리가 어디인지 확인합니다.
        -   **R**: `getwd()`
        -   **Python**: `import os; os.getcwd()`
    2.  **프로젝트 폴더 구성**: 프로젝트 폴더(예: `my_project`)를 만들고, 그 안에 `code` 폴더와 `data` 폴더를 만듭니다. 스크립트 파일은 `code` 폴더에, 데이터 파일은 `data` 폴더에 저장합니다.
    3.  **상대 경로 사용**: `code` 폴더의 스크립트에서 `data` 폴더의 파일을 불러올 때는 상대 경로를 사용합니다.
        -   **R**: `my_data <- read.csv("../data/mydata.csv")` (`..`은 상위 폴더를 의미)
        -   **Python**: `my_data = pd.read_csv("../data/mydata.csv")`
    -   **결과**: 이제 `my_project` 폴더를 통째로 압축해서 공유하면, 팀원 B는 어디에 압축을 풀든 상관없이 코드를 동일하게 실행할 수 있습니다. **RStudio의 'Project' 기능**이나 VS Code의 '폴더 열기' 기능은 이러한 프로젝트 기반의 워크플로우를 매우 편리하게 만들어 줍니다.

### 2. 오개념 분석: "CSV 파일을 열었는데 한글이 깨져요" - 인코딩(Encoding) 문제

-   **오개념**: "CSV 파일은 그냥 텍스트 파일이므로, 어떤 프로그램에서든 똑같이 열릴 것이다."
-   **분석**: **아닙니다.** 컴퓨터는 문자를 0과 1로 저장하며, 특정 문자를 어떤 숫자에 매핑할지 정한 규칙표가 바로 **인코딩**입니다. 이 규칙표가 맞지 않으면 글자가 깨져 보입니다.
    -   **Windows (한글)**: 주로 `CP949` 또는 `EUC-KR`이라는 인코딩 방식을 사용합니다. 엑셀에서 한글이 포함된 CSV 파일을 그냥 저장하면 대부분 이 방식으로 저장됩니다.
    -   **macOS, Linux, 웹 표준**: 전 세계적으로 **`UTF-8`**이라는 표준 인코딩을 사용합니다. R과 파이썬 역시 기본적으로 `UTF-8`을 가정하고 파일을 읽으려고 시도합니다.
-   **문제 상황**: Windows의 엑셀에서 저장한 한글 CSV 파일을 R이나 파이썬에서 그냥 읽으면, `UTF-8` 규칙으로 `CP949` 파일을 해석하려다 보니 글자가 깨지는 현상(예: ``)이 발생합니다.
-   **해결책**: 파일을 읽을 때, 해당 파일이 어떤 인코딩으로 저장되었는지 명시적으로 알려주어야 합니다.
    -   **R**: `read.csv("mydata.csv", fileEncoding = "CP949")`
    -   **Python (Pandas)**: `pd.read_csv("mydata.csv", encoding = "cp949")`
-   **궁극적인 해결책**: 데이터를 저장할 때부터 범용적인 `UTF-8` 인코딩으로 저장하는 습관을 들이는 것이 가장 좋습니다.
    -   **R**: `write.csv(my_data, "output.csv", fileEncoding = "UTF-8")`
    -   **Python (Pandas)**: `my_data.to_csv("output.csv", encoding = "utf-8-sig")` (엑셀에서 바로 열 때 깨지지 않도록 `utf-8-sig` 사용 권장)

---

## ❓ 연습 문제 및 해설

### 📝 문제

**1. R에서 사용자로부터 문자열을 입력받으려고 할 때, 빈칸에 들어갈 함수는?](#prob-1)**
> ```R
> birthyear <- function() {
>    age = (       )(prompt="Enter age: ")
>    curyear = as.numeric( format(Sys.Date(), "%Y") )
>    b.year = curyear - as.numeric(age)
>    list(born.year = b.year)
> }
> ```

<br>

**2. 파이썬에서 사용자로부터 문자열을 입력받으려고 할 때, 빈칸에 들어갈 함수는?](#prob-2)**
> ```python
> import datetime
> def birthyear():
>    age = (       )("Enter age: ")
>    now = datetime.datetime.now()
>    curyear = now.year
>    b_year = curyear - int(age)
>    print("born.year= ", b_year)
> ```

<br>

**3. R에서 텍스트 파일(`iris.txt`)을 읽어오려고 할 때, 빈칸에 들어갈 함수는?](#prob-3)**
> ```R
> myiris <- (       )("c:/data/iris.txt", header=T)
> ```

<br>

**4. 파이썬 Pandas로 텍스트 파일(`iris.txt`)을 읽어오려고 할 때, 빈칸에 들어갈 함수는?](#prob-4)**
> ```python
> import pandas as pd
> iris = (       )('c:/data/iris.txt', header=0, sep=' ', encoding='utf-8')
> ```

<br>

**5. 파이썬 Pandas로 엑셀 파일(`score.xlsx`)을 읽어오려고 할 때, 빈칸에 들어갈 함수는?](#prob-5)**
> ```python
> import pandas as pd
> data = (       )(r'C:\data\score.xlsx')
> ```

---

### 🔑 정답

1. `readline`
2. `input`
3. `read.table`
4. `pd.read_csv`
5. `pd.read_excel`

---

### 🧐 해설

<a id="prob-1"></a>
**1. R에서 사용자 입력을 받는 함수는?**
> **정답**: `readline`
> **해설**: R에서는 `readline()` 함수를 사용하여 사용자로부터 한 줄의 텍스트 입력을 받습니다. `prompt` 인자는 입력을 기다리면서 화면에 보여줄 메시지를 지정합니다.

<a id="prob-2"></a>
**2. 파이썬에서 사용자 입력을 받는 함수는?**
> **정답**: `input`
> **해설**: 파이썬에서는 `input()` 함수를 사용하여 사용자로부터 한 줄의 텍스트 입력을 받습니다. `input()`으로 받은 값은 항상 문자열(string) 타입이므로, 숫자 계산을 위해서는 `int()`나 `float()`를 사용해 형 변환을 해야 합니다.

<a id="prob-3"></a>
**3. R에서 텍스트 파일을 읽는 함수는?**
> **정답**: `read.table`
> **해설**: `read.table()`은 R에서 공백, 탭, 쉼표 등 다양한 구분자로 분리된 텍스트 파일을 읽어 데이터프레임으로 만드는 가장 기본적인 함수입니다. `header=T` 옵션은 파일의 첫 번째 줄을 열 이름으로 사용하라는 의미입니다.

<a id="prob-4"></a>
**4. 파이썬 Pandas로 텍스트 파일을 읽는 함수는?**
> **정답**: `pd.read_csv`
> **해설**: 파이썬의 Pandas 라이브러리에서 `read_csv()`는 CSV 파일뿐만 아니라 다양한 구분자를 가진 텍스트 파일을 읽는 데 사용되는 매우 강력하고 유연한 함수입니다. `sep=' '`는 공백을 구분자로 사용하라는 의미입니다.

<a id="prob-5"></a>
**5. 파이썬 Pandas로 엑셀 파일을 읽는 함수는?**
> **정답**: `pd.read_excel`
> **해설**: Pandas 라이브러리는 `read_excel()` 함수를 통해 엑셀 파일(`.xls`, `.xlsx`)을 직접 읽어 데이터프레임으로 변환하는 기능을 제공합니다. `r''`은 경로 문자열의 `\`를 이스케이프 문자로 해석하지 않도록 하는 raw string 표기법입니다.

---

## ✅ O/X 확인문제

**1.** 파이썬의 `input()` 함수로 입력받은 숫자는 바로 산술 연산에 사용할 수 있다.](#ox-1) **(O / X)**
**2.** R에서 CSV 파일을 읽을 때 가장 일반적으로 사용되는 함수는 `read.csv()`이다.](#ox-2) **(O / X)**
**3.** 다른 컴퓨터에서도 코드가 동일하게 동작하게 하려면 절대 경로를 사용하는 것이 좋다.](#ox-3) **(O / X)**
**4.** Windows의 엑셀에서 저장한 한글 CSV 파일이 깨지는 주된 이유는 인코딩 방식이 `CP949`가 아닌 `UTF-8`로 저장되었기 때문이다.](#ox-4) **(O / X)**
**5.** R에서 여러 문자열을 합칠 때 `paste()` 함수를 사용하고, 파이썬에서는 `+` 연산자나 `join()` 메서드를 사용한다.](#ox-5) **(O / X)**
**6.** R에서 데이터프레임을 CSV 파일로 저장할 때 `to_csv()` 함수를 사용한다.](#ox-6) **(O / X)**
**7.** R의 `readline()`과 파이썬의 `input()` 함수는 모두 사용자 입력을 기본적으로 숫자형으로 반환한다.](#ox-7) **(O / X)**
**8.** R에서 특정 패턴을 포함하는 문자열을 찾을 때 `grep()` 함수를 사용할 수 있다.](#ox-8) **(O / X)**
**9.** 파이썬 Pandas에서 엑셀 파일을 읽기 위해서는 `read_excel()` 함수를 사용한다.](#ox-9) **(O / X)**
**10.** R에서 현재 작업 디렉터리를 확인하는 함수는 `setwd()` 이다.](#ox-10) **(O / X)**


> <a id="ox-1"></a>
> **1. 정답**: X
> **해설**: 파이썬의 `input()` 함수는 모든 입력을 문자열(string)로 반환합니다. 따라서 산술 연산을 위해서는 `int()`나 `float()` 함수를 사용하여 숫자형으로 명시적인 형 변환을 해야 합니다.

> <a id="ox-2"></a>
> **2. 정답**: O
> **해설**: `read.csv()`는 `read.table()` 함수의 옵션 중 `header=T`, `sep=","` 등을 CSV 파일 형식에 맞게 미리 설정해 둔 편리한 함수입니다.

> <a id="ox-3"></a>
> **3. 정답**: X
> **해설**: 절대 경로는 사용자 컴퓨터마다 다르므로 코드 공유 시 오류를 유발합니다. 프로젝트 폴더를 기준으로 경로를 지정하는 상대 경로를 사용해야 코드의 이식성과 재현성이 높아집니다.

> <a id="ox-4"></a>
> **4. 정답**: X
> **해설**: 반대입니다. Windows 엑셀은 주로 `CP949` 인코딩으로 파일을 저장하며, R/파이썬의 기본 인코딩인 `UTF-8`로 이 파일을 읽으려고 할 때 인코딩 방식이 맞지 않아 한글이 깨지는 것입니다.

> <a id="ox-5"></a>
> **5. 정답**: O
> **해설**: R은 `paste()` 또는 `paste0()` 함수로 문자열을 결합하며, 파이썬은 `+` 연산자(두 문자열) 또는 `'구분자'.join(리스트)`(여러 문자열) 방식을 주로 사용합니다.

> <a id="ox-6"></a>
> **6. 정답**: X
> **해설**: R에서는 `write.csv()` 또는 `write.table()` 함수를 사용합니다. `to_csv()`는 파이썬 Pandas 데이터프레임의 메서드입니다.

> <a id="ox-7"></a>
> **7. 정답**: X
> **해설**: 두 함수 모두 사용자 입력을 문자열(character/string) 타입으로 반환합니다.

> <a id="ox-8"></a>
> **8. 정답**: O
> **해설**: `grep()` 또는 `grepl()` 함수는 정규표현식을 사용하여 벡터 내에서 특정 패턴과 일치하는 문자열의 인덱스나 존재 여부를 찾는 데 사용됩니다.

> <a id="ox-9"></a>
> **9. 정답**: O
> **해설**: 파이썬의 Pandas 라이브러리는 `read_excel()` 함수를 통해 엑셀 파일을 데이터프레임으로 쉽게 불러올 수 있습니다.

> <a id="ox-10"></a>
> **10. 정답**: X
> **해설**: 현재 작업 디렉터리를 확인하는 함수는 `getwd()`(get working directory)이고, 변경하는 함수가 `setwd()`(set working directory)입니다.

---