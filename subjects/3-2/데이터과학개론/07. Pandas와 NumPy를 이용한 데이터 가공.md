# 07. Pandas와 NumPy를 이용한 데이터 가공

## 학습 목표
1. Pandas의 핵심 데이터 구조인 `Series`와 `DataFrame`의 개념을 설명할 수 있다.
2. `loc`과 `iloc`을 사용하여 `DataFrame`에서 원하는 데이터를 정확하게 선택(Indexing/Slicing)할 수 있다.
3. `apply`, `map`, `applymap`의 차이점을 이해하고, 데이터에 함수를 적용하여 일괄적으로 처리할 수 있다.
4. `groupby`와 `agg` 함수를 조합하여 데이터를 그룹별로 집계하고 요약할 수 있다.
5. `merge`와 `concat`을 사용하여 여러 `DataFrame`을 다양한 방식으로 병합할 수 있다.
6. NumPy의 `ndarray`를 이해하고, 벡터화 연산을 통해 효율적인 수치 계산을 수행할 수 있다.

---

## 📝 요약 (Summary)
1.  **Pandas**: 파이썬에서 표(Table) 형태의 데이터를 다루기 위한 핵심 라이브러리입니다. 엑셀 스프레드시트나 데이터베이스 테이블처럼 행과 열로 구성된 데이터를 손쉽게 생성, 가공, 분석할 수 있게 해줍니다.
2.  **DataFrame과 Series**: **DataFrame**은 2차원 표 형태의 데이터 구조이며, Pandas의 가장 핵심적인 객체입니다. 각 열(Column)은 하나의 **Series**로 구성되며, Series는 1차원 배열 형태의 데이터 구조입니다.
3.  **데이터 선택 (`loc`, `iloc`)**:
    -   **`loc`**: 레이블(이름) 기반으로 행과 열을 선택합니다. (예: `df.loc['row_name', 'col_name']`)
    -   **`iloc`**: 정수 위치(인덱스) 기반으로 행과 열을 선택합니다. (예: `df.iloc[0, 1]`)
4.  **데이터 집계 (`groupby`, `agg`)**: 특정 열의 값을 기준으로 데이터를 그룹으로 묶고(`groupby`), 각 그룹에 대해 합계, 평균, 개수 등 다양한 집계 연산(`agg`)을 수행하여 인사이트를 도출합니다.
5.  **데이터 병합 (`merge`, `concat`)**:
    -   **`merge`**: 공통된 열(Key)을 기준으로 두 DataFrame을 SQL의 JOIN처럼 병합합니다.
    -   **`concat`**: 여러 DataFrame을 행이나 열 방향으로 단순히 이어 붙입니다.
6.  **NumPy (Numerical Python)**: 다차원 배열(ndarray) 객체를 중심으로, 빠르고 효율적인 수치 계산 및 선형대수 연산을 제공하는 파이썬의 기본 과학 계산 라이브러리입니다. Pandas는 내부적으로 NumPy를 기반으로 동작합니다.

---

## ✏️ 심화 학습 (Study Subject)
1. Pandas의 `loc`과 `iloc`의 차이점을 구체적인 예시 코드를 통해 비교하고, 각각 어떤 상황에서 사용하는 것이 더 적절한지 설명하시오.
2. `apply`, `map`, `applymap` 함수의 차이점을 설명하고, DataFrame의 특정 열에 복잡한 조건부 함수를 적용하는 시나리오에 가장 적합한 함수와 그 이유를 설명하시오.
3. SQL의 `JOIN`(INNER, LEFT, RIGHT, OUTER)과 Pandas의 `merge` 함수의 `how` 파라미터가 어떻게 대응되는지 설명하고, '고객' DataFrame과 '주문' DataFrame을 병합하는 예시를 작성하시오.
4. NumPy의 '벡터화(Vectorization)' 연산이 파이썬의 일반적인 `for` 반복문에 비해 왜 더 빠른 성능을 보이는지 그 원리를 설명하고, 두 방식의 속도를 비교하는 간단한 코드를 작성하시오.

---

## ❓ 연습 문제 및 해설

### 📝 문제

1. 다음 중 데이터를 데이터베이스의 테이블 형태로 다룰 수 있게 해 주는 파이썬의 라이브러리는?
data.base
data.frame
dplyr
Pandas

2. 다음 중 파이썬에서 NumPy 배열로부터 데이터 프레임을 생성하는 함수로 가장 적절한 것은?(단, import pandas as pd, import numpy as np 실행 가정)
pd.DataFrame
to_csv
np.ones
as.data.frame

3. 다음 중 파이썬에서 아래와 같이 리스트 중 서브 리스트를 선택하였다고 할 때, 출력되는 결과로 가장 옳은 것은?
<보기> [1,2,3,4,5][1:3]
[1,2,3]
[1,3]
[2,3]
[1,2]

4. 다음 중  명시적으로 인덱스 값에 기반해서 데이터를 선택하는 함수를 적용한 사례로 가장 적절한 것은?
earning_df_new_index.iloc
earning_df[earninbg_df["epsactual"]>20]
len(earning_df_new_index)
earning_df_new_index.loc

5. 다음 중 아래 <보기>의 파이썬 명령문과 가장 관계가 깊은 설명은?
<보기> earning_df.sample(frac=0.5)
0.5라는 값을 갖는 샘플을 추출
전체 샘플 수를 1로 봤을 때, 0.5 비율만큼 샘플을 추출
전체 샘플에 0.5씩 곱하여 데이터를 새로 생성
전체 샘플의 수치적 자료가 소수점으로 되어 있을 경우 이를 반올림

6. 다음 중 파이썬의 drop_duplicates 함수를 사용하였을 때 그 기능과 가장 관계가 깊은 것은?
데이터의 연산
중복 데이터의 제거
누락 데이터 처리
정렬

7. 파이썬의 apply 함수에 lambda를 이용한 기능이 주어졌을 때, axis=1 과 같이 옵션을 지정했다면 다음 중 이에 대한 설명으로 가장 옳은 것은?
데이터 프레임의 열을 인자로 받음
데이터 프레임의 1번 열에만 적용
데이터 프레임의 1번 행에만 적용
데이터 프레임의 행을 인자로 받음

8. 파이썬에서 데이터 프레임의 값들을 특정 그룹으로 묶은 다음 그 그룹에 대해 연산을 적용하려고 한다. 이와 관련해서 가장 적절한 함수는?
sort_values 와 agg 함수
groupby 와 sort_index 함수
sort_values 와 sort_index 함수
groupby 와 agg 함수

9. 다음 중 파이썬에서 두 개의 데이터 프레임을 공통된 열을 기준으로 하나의 데이터 프레임으로 합쳐야 하는 경우 사용하는 함수로 가장 적절한 것은?
common
merge
data.frame
two_to_one

10. 다음 중 파이썬의 NumPy 라이브러리의 함수로서 수학적 행렬 곱을 산출하는 함수로 가장 적절한 것은?
ones
transpose
concatenate
matmul



---

### 🔑 정답

1. ①
2. ④
3. ②

---

### 🧐 해설

<a id="prob-1"></a>
**1. 문제?**
> **정답: ① 선택1**
> **해설**: 해설
> - ② 해설2
> - ③ 해설3
> - ④ 해설4

<a id="prob-2"></a>
**2. 아래 <보기> 중 데이터과학의 특징으로 옳은 것은 모두 몇 개인가?**
> **정답: ④ 4개**
> **해설**: <보기> 의 내용에서 선택

<a id="prob-3"></a>
**3. 문제?**
> **정답: ③ 내용(body)**
> **해설**: 해설 **핵심내용(keyword)**,

---

## ✅ O/X 확인문제(연습문항 개수의 2배)

**1.** [문제 내용](#ox-1) **(O / X)**
**2.** [문제 내용](#ox-2) **(O / X)**


> <a id="ox-1"></a>
> **1. 정답**: O
> **해설**: [정답에 대한 간략한 해설]

> <a id="ox-2"></a>
> **2. 정답**: X
> **해설**: [정답에 대한 간략한 해설]

---

## 📖 심화 학습 예시 답안

#### 1. 제목1

설명

1.  **핵심단어 (keyword)**: 설명 (예: `example`)
2.  **핵심단어 (keyword)**: 설명 (예: `example`)


#### 2. 제목2

설명

| 대분류 | 중분류 | 소분류 | 설명 | 예시 |
| :--- | :--- | :--- | :--- | :--- |
| **내용1** | **내용2** | **내용3** | 내용4 | 내용5 |
| **내용1** | **내용2** | **내용3** | 내용4 | 내용5 |
| **내용1** | - | - | 내용2 | - |


#### 3. 제목3

설명


---

## 🌐 최신 동향 및 추가 정보

### 1. 제목
내용

### 2. 제목
내용

---

## 📚 핵심 용어집 (Glossary)

- **핵심 단어 (key word)**: 설명
- **핵심 단어 (key word)**: 설명

---

## 🤖 AI 학습 파트너를 위한 추가 자료

### 1. 제목
내용

### 2. 제목
내용

---

## 📚 참고 자료 (References)

- [자료 제목](링크)
- [자료 제목](링크)